<!doctype html>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/gh/calipho-sib/feature-viewer@v1.1.0/dist/feature-viewer.bundle.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ag-grid/Docs-27.0.1-20220211/ag-grid-community.min.js"></script>
<script src="./js/impl/hug.js"></script>
<script src="./js/impl/praise.js"></script>
<script src="./js/impl/template.js"></script>
<script src="./js/palette.js"></script>
<script src="./js/hob.js"></script>
<script src="./js/vis.js"></script>

</script>

<html lang="en">
<div class="container">
    <h2>Bacteremia episodes algorithm simulator</h2>
    <p>This simulator is being developed by <a target="_blank" href="https://www.hug.ch/en/prevention-and-control-infection">HUG PCI group</a> and is still a work in progress. If you see issues or have questions, don't hesitate to
        <a target="_blank" href="https://github.com/ddtxra/hob/issues">open an issue</a>.
        <br>The source code of the HUG_v0 algorithm can be found <a href="https://github.com/ddtxra/hob/blob/gh-pages/js/impl/hug.js">here</a>. Other algorithm implementations can be added, contributions are welcome.
        <br>Test scenarios can be found and added
        <a target="_blank" href="https://github.com/ddtxra/hob/blob/gh-pages/static/test_scenarios.json">here</a> (feel free to add yours).
        <br>Note: The simulator only deals with the identification of bacteremias (the "counting" part): It transforms positive hemocultures (raw data) into episodes, taking into account repeated blood cultures, copy strains, polymicrobial and commensals.
        The classification of an episode in HOB (hospital-onset bacteremia), secondary, primary, catheter related (CRBSI), catheter associated (CLASI) or contaminant is not part of the simulator.
    </p>

    <form>
        <p>
            <b>Choose an algorithm</b>
        </p>
        <div id="algo-selector" class="form-group">
            <select id="algo-form-selector" class="form-control">
            <option value="HUG" selected>HUG_v0</option>
            <option value="PRAISE">PRAISE_v0</option>
            <option value="template">template</option>
        </select>
        </div>
        <span disabled><i>(show description) TODO</i></span>
        <br>
        <p>
            <b>Choose a scenario</b>
        </p>
        <div id="dataset-selector" class="form-group">
            <select id="form-selector" class="form-control">
            <option selected>Selet a scenario</option>
          </select>
        </div>
        <br>
        <div class="container" id="scenarioContainer">

            <b>Scenario description</b>
            <p>
                <span id="description"></span>
            </p>

            <div class="form-group" style="display: none;">
                <label for="exampleFormControlTextarea1">Positive hemocultures</label>
                <textarea class="form-control" id="pos_hemocultre_txtarea" rows="20"></textarea>
            </div>
            <h3>Bacteriological data</h3>
            <p>
                <b>Positive hemocultures (given by the selected scenario)</b>
            </p>
            <div id="fv_pos_hemo"></div>
            <h3>Episodes identification</h3>
            <p>
                <b>Episodes expected</b>
                <p>
                    <span id="explanation_expected"></span>
                </p>

            </p>
            <div id="fv_expected"></div>
            <p>
                <b>Episodes computed by the selected algorithm</b>
            </p>
            <div id="fv_episodes"></div>
            <p>
                <b></b>
            </p>
            <p>
                <b>Classification of episodes (TODO)</b>
            </p>
            <div id="fv_classification"></div>
            <p>
                <b></b>
            </p>

            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a id="rawDataTab" href="#" class="nav-link active">Raw data (positive hemocultures)</a>
                </li>
                <li class="nav-item">
                    <a id="computedDataTab" href="#" class="nav-link">Computed episodes (episodes)</a>
                </li>

            </ul>

            <div id="pos_hemo_grid" style="height: 500px; width:1200px;" class="ag-theme-alpine"></div>
            <div id="episodes_grid" style="height: 500px; width:1200px;" class="ag-theme-alpine"></div>
            <div class="container">

    </form>
    </div>
    <script src="./js/app.js"></script>

</html>

<style>
    .svgHeader {
        display: none;
    }
</style>